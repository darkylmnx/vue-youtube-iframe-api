{"version":3,"sources":["config.js","utils.js","components\\Player.js","main.js"],"names":["SIZES","WIDTH","HEIGHT","MIN_SIZES","IframeAPIReady","Promise","resolve","reject","window","onYouTubeIframeAPIReady","getIdFromUrl","swapObject","id_regex","url","match","obj","new_obj","k","STATES","props","id","type","String","width","Number","default","height","playerVars","Object","watch","new_id","loadById","new_url","loadByUrl","methods","onReady","event","shouldLoadByUrl","$emit","onError","onApiChange","onStateChange","data","toLowerCase","onPlaybackRateChange","onPlaybackQualityChange","method","autoplay","player","created","length","mounted","then","assign","YT","PlayerState","Player","$refs","videoId","events","destroyed","destroy","render","h","ref","plugin","install","Vue","loadComponent","tag","document","createElement","src","first_script","getElementsByTagName","parentNode","insertBefore","component","use"],"mappings":";;;;;;AAAO,IAAMA,wBAAQ;AACnBC,SAAO,GADY;AAEnBC,QCCcQ,EDDN,aCCMA;ADHK,CAAd,OCcSC,aAAAA;AAdhB;ACAA,AFKO,ACJP,IDIaR,ACJPS,WAAW,qBDIQ,+FCJzB;ADKEX,SAAO,GADgB;AEJzB,AFMEC,ACJK,SAASQ,CDIN,WCJH,CAAsBG,GAAtB,EAA2B;AAChC,MAAMC,QAAQD,IAAIC,KAAJ,CAAUF,QAAV,CAAd;ACDF,AFOA,IEPMM,SAAS,EAAf;AFEyB,AGLzB,AFME,CDDK,CAMA,IAAMd,ACLP,CAACU,KAAD,IAAU,CAACA,MAAM,CAAN,CAAf,EAAyB,qBDKG,IAAIT,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AAC7DC,ACLE,SDKKC,ECLE,KAAP,ECFW,cFOb,GAAiC;AENjCU,AFMiC,AGXnC,AFOG,SCFM,EFMgCb,SAAN;AEL/Bc,AFK+B,GAAjC,KELM;AACFC,AFKL,ACHC,CDC4B,CAAvB,OCDEP,GCFGQ,GDEG,CAAN,CAAP;ACHM,ADIP,KCLQ;AAILT,SAAK;AACHQ,ADEN,YCFYC;AADH,ACPT,AFWO,IEXD2C,CDGG,IDQOtD,IEXD,MFWR,CAAoBI,GAApB,EAAwB;ACD3BQ,ACTF2C,AFWA,MAAMlD,GEZO,EDUJ,KDEO,EAAhB,UEXSmD,GADI,EAC6C;ADUtD9C,ACVsD,YDUhD,CAACC,MAAD,EAASE,MAAT,CADD,uDCT6C,EAAI;ADWtDC,ACXsD,AFa1D,OAAI,CEbWF,GFaPN,CAAR,CEb0D,EDW7C,CDEAF,GAAb,EEbeQ,AFaG,KEbwC,GDWvCtB;AAFV,ACTiD,AFcxDe,KCZK,GCFeU,IFcZX,EEdgD,EFc5CE,CAAJ,CAAR,IEdoBS,AFcFT,CAAlB,KEdwD;ADaxDS,ACbwD,AFezD,YCFS,sBCboB0C,aAA4B;ADctD/C,ACdsD,QAA5B+C,IDcpB,CAAC9C,MAAD,EAASE,ACduC,MDchD,CADA,+BCboC,IAAY;ADetDC,ADEJ,SAAOT,MCFM,CDEb,aCFmBd;AAFT,ACZR,AFiBH,KChBQ,GCDDqB,SAASA,QAAQ,kBAAUtB,KAA/B,EAAsC;ADgBtC0B,ACfE,gBD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","file":"main.map","sourcesContent":["export const SIZES = {\r\n  WIDTH: 640,\r\n  HEIGHT: 360\r\n}\r\n\r\nexport const MIN_SIZES = {\r\n  WIDTH: 200,\r\n  HEIGHT: 200\r\n}\r\n\r\n// export the ready state promise\r\nexport const IframeAPIReady = new Promise((resolve, reject) => {\r\n  window.onYouTubeIframeAPIReady = () => resolve()\r\n})\r\n","// export get id from url\r\nconst id_regex = /(?:youtube(?:-nocookie)?\\.com\\/(?:[^\\/\\n\\s]+\\/\\S+\\/|(?:v|e(?:mbed)?)\\/|\\S*?[?&]v=)|youtu\\.be\\/)([a-zA-Z0-9_-]{11})/\r\n\r\nexport function getIdFromUrl(url) {\r\n  const match = url.match(id_regex)\r\n\r\n  if (!match || !match[1]) {\r\n    return false\r\n  }\r\n\r\n  return match[1]\r\n}\r\n\r\n// export reverse fonction\r\nexport function swapObject(obj){\r\n  const new_obj = {}\r\n\r\n  for(var k in obj) {\r\n    new_obj[obj[k]] = k;\r\n  }\r\n\r\n  return new_obj\r\n}\r\n","import { SIZES, IframeAPIReady } from '../config'\r\nimport { getIdFromUrl, swapObject } from '../utils'\r\n\r\nconst STATES = {}\r\n\r\nexport default {\r\n  props: {\r\n    id: {\r\n      type: String\r\n    },\r\n    url: {\r\n      type: String\r\n    },\r\n    width: {\r\n      type: [String, Number],\r\n      default: SIZES.WIDTH\r\n    },\r\n    height: {\r\n      type: [String, Number],\r\n      default: SIZES.HEIGHT\r\n    },\r\n    playerVars: {\r\n      type: Object,\r\n      default: {}\r\n    }\r\n  },\r\n\r\n  watch: {\r\n    id (new_id) {\r\n      this.loadById(new_id)\r\n    },\r\n    url (new_url) {\r\n      this.loadByUrl(new_url)\r\n    }\r\n  },\r\n\r\n  methods: {\r\n    onReady (event) {\r\n      if (this.shouldLoadByUrl) {\r\n        this.loadByUrl(this.url)\r\n        this.shouldLoadByUrl = false\r\n      }\r\n\r\n      // console.log('ready', event)\r\n      this.$emit('ready', event)\r\n    },\r\n    onError (event) {\r\n      // console.log('error', event)\r\n      this.$emit('error', event)\r\n    },\r\n    onApiChange (event) {\r\n      // console.log('api-change', event)\r\n      this.$emit('api-change', event)\r\n    },\r\n    onStateChange (event) {\r\n      // console.log('state-change', event)\r\n      this.$emit('state-change', event)\r\n      this.$emit(STATES[event.data].toLowerCase(), event)\r\n    },\r\n    onPlaybackRateChange (event) {\r\n      // console.log('playback-rate-change', event)\r\n      this.$emit('playback-rate-change', event)\r\n    },\r\n    onPlaybackQualityChange (event) {\r\n      // console.log('playback-quality-change', event)\r\n      this.$emit('playback-quality-change', event)\r\n    },\r\n    loadByUrl (url) {\r\n      const id = getIdFromUrl(url)\r\n      const method = Number(this.playerVars.autoplay) === 1 ? 'loadVideoById' : 'cueVideoById'\r\n\r\n      id && this.player[method](id)\r\n    },\r\n    loadById (id) {\r\n      const method = Number(this.playerVars.autoplay) === 1 ? 'loadVideoById' : 'cueVideoById'\r\n\r\n      this.player[method](id)\r\n    }\r\n  },\r\n\r\n  created () {\r\n    this.player = null\r\n    this.shouldLoadByUrl = (typeof this.url === 'string' && this.url.length)\r\n  },\r\n\r\n  mounted () {\r\n    IframeAPIReady.then(() => {\r\n      Object.assign(STATES, swapObject(window.YT.PlayerState))\r\n\r\n      this.player = new window.YT.Player(this.$refs.player, {\r\n        width: this.width,\r\n        height: this.height,\r\n        videoId: this.id,\r\n        playerVars: this.playerVars,\r\n        events: {\r\n          onReady: this.onReady,\r\n          onError: this.onError,\r\n          onApiChange: this.onApiChange,\r\n          onStateChange: this.onStateChange,\r\n          onPlaybackRateChange: this.onPlaybackRateChange,\r\n          onPlaybackQualityChange: this.onPlaybackQualityChange\r\n        }\r\n      })\r\n    })\r\n  },\r\n\r\n  destroyed () {\r\n    this.player.destroy()\r\n  },\r\n\r\n  render (h) {\r\n    return h('div', {ref: 'player'})\r\n  }\r\n}\r\n","import { MIN_SIZES, SIZES } from './config'\r\nimport _Player from './components/Player'\r\n\r\nconst plugin = {\r\n  install (Vue, {width, height, loadComponent = true} = {}) {\r\n    if (width && width > MIN_SIZES.WIDTH) {\r\n      SIZES.WIDTH = width\r\n    }\r\n\r\n    if (height && height > MIN_SIZES.HEIGHT) {\r\n      SIZES.HEIGHT = height\r\n    }\r\n\r\n    // load iframe api\r\n    const tag = document.createElement('script')\r\n    tag.src = 'https://www.youtube.com/iframe_api'\r\n\r\n    const first_script = document.getElementsByTagName('script')[0]\r\n    first_script.parentNode.insertBefore(tag, first_script)\r\n\r\n    // load component globally\r\n    loadComponent && Vue.component('VytiaPlayer', _Player)\r\n  }\r\n}\r\n\r\ntypeof window.Vue === 'object' && window.Vue.use(plugin) \r\n\r\nexport default plugin\r\nexport const Player = _Player\r\n"]}